---
title: 凤凰项目-三步工作法笔记
tags: 读书笔记
categories: 读书笔记
abbrlink: d698d359
date: 2020-04-14 12:31:11
---
## 前言:
去年为了了解DevOps的相关概念, 看了《凤凰项目》这本热荐的入门书. 

虽然看起来是一本技术相关的书, 其实以第一人称的视角来讲述, 一个IT运维经理临危受命, 推动项目转型的波折和故事, 特别生动有趣, 每个人物也个性鲜明, 搞得我明明在严肃认真的学习, 却常常像看了不正经的书似的哈哈大笑...

书中还穿插各种吐槽, 有同感的是, 我也在19年公司年会节目上改编过一首歌词吐槽bug什么的, 不过好在大家都挺包容的... :smile:

不过, 只看一遍过过瘾是不行的, 整理了下读书笔记. 下文中就包括《凤凰项目》的内容梗概、有趣段落摘抄、相关概念、个人感悟.

## 内容梗概:
主角比尔, 一家制造和零售企业的IT运维经理, 面临着被竞争对手不断超越的困境, 接任IT运维部的副总裁, 管理一个叫凤凰的电商系统项目, 以此招揽客户并拯救公司的经济危机.
<!-- more -->
### 接任后, 处理的第一个问题就是工资核算故障. 
* 故障起因: 开发部为了修补一个审计发现, 没有按照规定的流程, 直接部署了一个标记化应用, 而正是这个应用导致工资核算表的一个字段有误.

* 暴露的问题: 
    * 1. 流程繁琐、响应慢的问题, 这引发申请测试环境的预算一直没审批, 最后没对变更进行测试, 而直接上线, 并出现故障.

    * 2. 各部门沟通、协调不到位.

        * 业务市场部不断压缩IT部交付部署时间、迫切想先人一步抢夺市场. 

        * 开发部向运维申请的设备、环境, 总是不能及时交付, 在预估项目完成进度中, 没有考虑运维部署的时间, 总是匆忙上线. 

        * 运维部没有清晰的部署文档, 而不知道运行目标需要哪些设备, 无法进行压力测试验证设想, 没有获得投产所需的充分的文件数据, 更没有全面监控和备份. 

        * 开发部也有邀请运维部参与大型计划会议, 但关键工程师总是要处理各种故障没办法到会, 这里就暴露了约束点成为工作瓶颈的问题. 

* 应对措施:
    * 1. 先列出工作任务清单, 了解工作需求、优先等级、工作进度、可用资源(如相关人员的工作是什么, 完成这些工作需要多少的时间), 预估工作量, 让大家清楚项目的进度, 并合理调配资源.
    * 2. 稳定工作环境, 可视化管理IT运维部里的半成品, 设定了一些变更流程.
        * 在白板上, 列出所有的变更、相关人员.讨论变更的类型，把想要付诸实施的变更写在索引卡片上，然后对变更板上的卡片进行筛选和安排, 以此在开发部和IT运维部之间建立快速工作流, 这样每个人都能看到半成品.
        * 把一部分变更审核委派给代理人, 重点关注最有风险的变更(如对公司业务产生很大影响甚至整体影响的网络和数据库变更)
            * 预先定义好高风险变更目录, 列出十大最脆弱的服务、应用程序和基础架构列表
            * 可能会影响到其中任何一个的变更申请都将立刻标上记号, 并详细审查
            * 围绕这些变更建立一些标准流程, 如希望什么时候实施变更(可提前询问业务部门), 要求关键人员关注变更, 并随时待命
        * 对于低风险变更(如增加Java应用程序服务器线程池容量), 仍需要提交, 但可以不经过批准就安排操作日程.
        * 对于复杂的中等变更, 变更提交者有责任向可能受到影响的人员进行咨询并得到其认可, 然后把变更卡片交给负责人审核并安排操作日程.

### 一个叫艾瑞克的董事会新成员, 从天而降
* 艾瑞克拽着比尔来到公司的生产车间, 并引出三步工作法:
* 第一工作法, 理解在工作从开发部移向IT运维部时该如何建立快速工作流, 那是业务部门与客户之间的衔接.
    * 要根据瓶颈资源所能完成的工作速度来安排工作, 确保绝大多数受约束的人力资源都只能投放在整个系统的目标所服务的工作上, 而不只是为了一个部门的目标服务
    * 确保形成一条迅速、可预测、持续不断的计划内工作流, 从而向业务部门交付工作价值, 同时尽可能降低计划外工作的影响和破坏, 提供稳定的、可预期的、安全的IT服务.
* 第二工作法, 缩短及放大反馈回路, 从而在源头上解决质量问题, 避免返工.
* 第三工作法, 建立一种文化, 既能鼓励探索、从失败中吸取教训, 又能理解反复的实践是精通工作的先决条件. 

--------------------------------—_以上为部分内容梗概, 未完待续, 笔记还需多次迭代_-------------------------------------

## 有趣段落摘抄:
> 俗话说得好, 如果你的同事主动告诉你他们要离职, 那多半是自愿的.但如果是其他人告诉你的, 那他们一定是被迫的. 所以说, 我的上司和上司的上司刚刚被炒了.

> “比尔, 我知道你没有申请这个职位, 但公司已经命悬一线. 我需要你来帮助我拯救这家伟大但公司. 我能指望你吗?”
> 啊, 我的天哪! 还没来得及礼貌地谢绝, 我突然听到自己说:“ 可以, 你可以指望我.”

> 迪克打断了她: “这是IT部的比尔.他说他是被派来收拾这个这个烂摊子的, 或者准备在收拾的过程中壮烈牺牲, 我是这么理解的.”

> “他摇摇头继续说：“要说服业务部门去做正确的事情越来越困难。他们就像走进糖果店的小孩子。他们在飞机杂志上读到，可以在云端管理整个供应链，每年只要499美元，然后这突然就成了公司的主要行动。当我们告诉他们，事实上没那么简单，并演示做好这个要花什么样的代价时，他们就不见了。他们去哪儿了？去和维尼表兄或者其他推销外包服务的家伙谈了，那些人许诺，能用十分之一的时间和价格做成这件事。”

> “我脑海里立刻浮现出这样的景象，约翰问了一些愚蠢的问题，或者说了一些愚蠢的话，彻底激怒了迪克，迪克当场解雇了他，为绝后患，就把我也解雇了。
> 然而，我发现自己说的是：“好的，我会去的。”

> “他剃了头，看上去像瘦了十五磅。他穿着一件我只能描述为“欧洲式样”的衬衫和一件马甲。和他平常穿的略为宽松的衬衫不同，他身上那件粉色衬衫非常修身。再加上那件马甲，他看起来像是个……时尚模特？伦敦夜店男？拉斯维加斯赌场发牌员？”


## 相关概念:
### 精益理论
* 包括
    * 降低批量规模
    * 减少半成品
    * 缩短并增强反馈回路

### DevOps
* what
    * 也就是开发运维, 这个词最初是在2008年由帕特克里.德布瓦和安德鲁.谢弗提出, 脱胎于马克.伯吉斯博士发起的“基础设施即代码”的实践及有杰兹.亨伯尔和戴维.法利发起的持续集成和持续部署.
    * 应用了精益理论, 来提高流经生产管理、开发、测试、IT运维及信息安全等部门的工作流的速度.
* why
    * 能使产品功能更快地进入市场, 创造价值. 在玩偶实验室2012年的“开发运维报告说明”中, 用基准问题测试4039家IT企业, 发现运用开发运维的高绩效公司比同行: 代码部署频率快30倍; 代码部署交付期快8000倍; 变更成功率高2倍; MTTR(Mean Time To Repair, 平均修复时间)快12倍. 
* how
    * 三步工作法
    * 其中, 持续交付就是三步工作法中到一种体现, 它强调小到批次规模(如每天检查主干), 在发生问题时停止生产(如一旦构建、测试或部署失败, 就不再允许开展新到工作; 将系统工作到完整性置于工作本身之上), 并必须频繁进行验证性测试, 以避免生产中到失误, 或至少能检测并修复故障.

### 三步工作法
* what
    * 旨在阐明指导开发运维的流程与实践的价值观与理念.
* 第一工作法
    * what 
        * 关于从开发到IT运维再到客户的整个自左向右的工作流. 
    * why
        * 为了使流量最大化, 让批量规模和工作间隔尽量小, 不让缺陷流向下游工作中心, 并不断为整体目标(与之相对的局部目标就是开发功能完成率、测试发现/修复比率或运维有效性指标等)进行优化.
    * how
        * 必要做法包括: 持续构建、集成以及部署, 按需创建环境, 严控半成品, 以及构建起能顺利变更的安全系统和组织.
        * 其中严控半成品就可以建立看板图, 列出: 待办、在办、已办 
* 第二工作法
    * what
        * 关于价值流各阶段中, 自右向左的快速持续反馈流.
    * why
        * 放大各阶段的效益以确保防止问题再次发生, 或更快地发现和修复问题, 从源头上保证质量.
    * how
        * 在部署管道中的构建和测试时, “停止生产线”;
        * 日复一日地持续改进日常工作;
        * 创建快速的自动化测试套装软件, 确保代码总是处于可部署状态;
        * 在开发和IT运维之间建立共同的目标和共同解决问题的机制;
        * 建立普遍的产品遥测技术;
        * 让每个人都能知道, 代码和环境是否在按照设定的运行, 以及是否达到了客户的目标.
* 第三工作法
    * what
        * 关于创造公司文化, 该文化可带动两种风气的形成: 
            * 不断尝试, 这需要承担风险并从成功和失败中吸取经验教训;
            * 理解重复和练习是熟练掌握的前提.
    * why
        * 尝试和承担风险让我们能够不懈地改进工作系统;
        * 不断重复的日常操练赋予我们的技能和经验, 一旦出了问题, 就可以撤回至安全区域并恢复正常运作.
    * how
        * 营造一种勇于创新、敢于冒险(相对于畏惧或盲目服从命令), 及高度信任(相对于低信任度和命令控制)的文化, 把至少20%开发和IT运维周期划拨给非功能性需求, 并不断鼓励进行改进

### IT从事的四种工作类型
* 业务项目
* IT内部项目
    * 包括业务项目衍生出的基础架构或IT运维项目, 及内部生成的改进项目(如创建新环境和部署自动化)
* 变更
    * 经常由业务项目和IT内部项目的工作引起, 往往在保修系统中被跟踪(如IT运维补救、JIRA或用于开发的敏捷计划工具)
* 计划外工作或救火工作
    * 包括操作事故和操作问题, 通常由上述类型的工作导致, 往往以牺牲其他计划内工作为代价.

### 约束理论5个方法步骤:
* 识别约束点;
* 利用约束点;
    * “确保不让约束点浪费任何时间。永远不要让约束点迁就别的资源而干等着，而是应该专注于IT运维部对当前所需完成工作中优先级最高的那一项。一直都要这样。”
* 让所有其他活动都从属于约束;
    * “把约束点置于次要地位。在约束理论中，这往往是由名为‘限制驱导式排程法’（Drum-Buffer-Rope）的工具来实施的。《目标》中的主角亚历克斯，发现队伍里最慢的童子军赫比实际上决定了整支队伍的行军速度，于是他了解了这件事。亚历克斯把赫比调到队伍前头，防止孩子们超前太远。后来，亚历克斯开始在他的工厂里根据烘房的工作效率来控制所有工作的报修速度，那些烘房就是工厂的瓶颈。那就是他在现实世界里的赫比。”
* 把约束点提升到新到水平;
* 寻找下一个约束点;

## 个人感悟:
* 也许大家都有把工作做好的想法, 也为此采取措施, 但是措施适不适合就是另外一回事了, 这些措施是需要从整体出发, 切入最上层的上下文中考虑的, 因为一项工作的完成, 实际上是多方合作的结果, 而之间的沟通就会影响整体的效率. 书中的三步工作法, 就是为了解决各部门合作沟通效率问题而产生的, 首先是建立自上而下的工作流, 切分任务足够小, 然后是建立反馈流, 及时响应, 最后是建立一种勇于尝试的团队文化.

* 而理论再完美, 最终还是需要不断尝试, 找到适合自己的解决方案, 只有实践了才知道有哪些问题, 下一步要如何调整.

* 将所有的工作分类, 不同的工作安排不同的优先级和处理方法.书中就是把IT工作分为: 业务项目, IT内部项目, 变更项目, 计划外的救火工作这几类.

* 其实这本书除了能了解开发运维、管理相关理念之外, 也能学到些为人处事的方法, 比如主角总会深呼吸或者倒数几秒, 让自己迅速冷静下来, 因为情绪会阻碍正确的决策, 使问题得不到解决.

* 最后, 多看书太重要了, 因为当自己的视角不够高不够广, 而往一条错误的路径上前行时, 有人给予正确的提点自然是最好的, 但实际情况是, 遇到那样的人概率很小, 相当于等着“神啊, 告诉我怎么做吧”, 所以就需要自己多主动吸收前人的优秀经验, 反思自己的行为, 不断调整, 或者以此理解自己领导作出的决策.

* 说实话, 以自己现在的水平, 其实也不能吸收到多少, 后续还得反复研读, 细细咀嚼书中的案例, 还有最重要的, 用到工作和生活中.